language: node_js
cache:
  apt: true
  directories:
  - node_modules
node_js:
- '0.12'
- 'iojs-v2'
- 'iojs-v3'
- '4'
sudo: 9000
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
    - graphicsmagick
    - imagemagick
    - ffmpeg
before_install:
- sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 90
- curl -s https://raw.githubusercontent.com/lovell/sharp/master/preinstall.sh | sudo bash -
- wget http://flowtype.org/downloads/flow-linux64-latest.zip -O /tmp/flow.zip; unzip
  /tmp/flow.zip -d /tmp; export PATH=$PATH:/tmp/flow/
install:
- npm install
after_success:
- npm run bench
- bash ./deploy-gh-pages.sh
env:
  global:
  - GH_REF: github.com/piobyte/flamingo.git
  - secure: JMdtUr8MWYN0mhWiwivcWGhGXUOJnOv5UGSfsurYsGVKyqK0qRJMVmf+bezMkIhxktcq6RJNAmYq/1wsh1mqU/iHoWaAHeOtZoMYItYgIco6GJgfYJ2Dhb46WiRbDzi5qcEjCV3fDb3K8OXePWVcBoGAvp5e+pH3vvvw0SgAjBY=
notifications:
  slack:
    secure: gSLT//7zFcT1AVj99og8Bq320pgKyHPqIU84uaSytdM5Tolwrbpf4uAXRv3pXGXWkg8B2wuKhazp9dFodzgEUOJL6YIpNa+n7gVuef5I28SPicx56HrCdcIkXM6INHmhldrfjm0NnZrvoZkvGOwQd4Gz3y6cRLYchEdqYXLi3Yc=
